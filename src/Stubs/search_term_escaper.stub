<?php

declare(strict_types=1);

namespace App\Helpers;

class SearchTermEscaper
{
    public static function escape(?string $term): string
    {
        if (empty($term)) {
            return '';
        }

        // Escape special SQL LIKE characters: %, _, and the escape character itself (!)
        $escaped = str_replace(
            ['!', '%', '_'],
            ['!!', '!%', '!_'],
            $term
        );

        return '%' . $escaped . '%';
    }
}
